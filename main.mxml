<?xml version="1.0" encoding="utf-8"?>

<mx:Application
  xmlns:mx="http://www.adobe.com/2006/mxml"
  layout="absolute"
  width="480"
  height="320"
  frameRate="60"
  creationComplete="creationComplete()"
  applicationComplete="applicationComplete()"
  mouseMove="mouseMove(event)"
  mouseDown="mouseDown(event)"
  mouseUp="mouseUp(event)"
  enterFrame="enterFrame(event)"
  >

  <mx:Canvas x="0" y="0" width="100%" height="100%" id="myCanvas"/>
  <mx:Script><![CDATA[

    import Src.Game;

    public var game:Game;

    public function creationComplete():void
    {
      game = new Game();
      game.ui = this;
      game.canvas = myCanvas;
      game.creationComplete();
    }
    public function applicationComplete():void
    {
      stage.addEventListener(KeyboardEvent.KEY_DOWN, keyDown);
      stage.addEventListener(KeyboardEvent.KEY_UP, keyUp);
    }
    public function enterFrame(event:Event):void
    {
      if(game)
        game.enterFrame(event);
    }
    public function mouseMove(event:MouseEvent):void
    {
      game.input.mouseMove(event);
    }
    public function mouseDown(event:MouseEvent):void
    {
      game.input.mouseDown(event);
    }
    public function mouseUp(event:MouseEvent):void
    {
      game.input.mouseUp(event);
    }
    public function keyDown(event:KeyboardEvent):void
    {
      game.input.keyDown(event);
    }
    public function keyUp(event:KeyboardEvent):void
    {
      game.input.keyUp(event);
    }

  ]]>
  </mx:Script>
</mx:Application>